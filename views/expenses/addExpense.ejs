<% layout('/layouts/boilerplate') -%>

<div class="expense-form-container">
    <h2>Add New Expense</h2>
    <form id="expenseForm" action="/expenses/add" method="POST" class="needs-validation" novalidate>
        
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" class="form-control" id="title" name="title" required>
            <div class="invalid-feedback">Please enter a title.</div>
        </div>
        
        <div class="form-group">
            <label for="amount">Amount:</label>
            <input type="number" class="form-control" id="amount" name="amount" required>
            <div class="invalid-feedback">Please enter a valid amount.</div>
        </div>

        <div class="form-group">
            <label for="category">Category:</label>
            <select class="form-control" id="category" name="category" required>
                <option value="" disabled selected>Select Category</option>
                <option value="Food">Food</option>
                <option value="Transport">Transport</option>
                <option value="Bills">Bills</option>
                <option value="Shopping">Shopping</option>
                <option value="Other">Other</option>
            </select>
            <div class="invalid-feedback">Please select a category.</div>
        </div>

        <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" class="form-control" id="date" name="date" required>
            <div class="invalid-feedback">Please select a date.</div>
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <textarea class="form-control" id="description" name="description" required></textarea>
            <div class="invalid-feedback">Please enter a description.</div>
        </div>

        <button type="submit" class="btn btn-primary">Save Expense</button>
    </form>
</div>

<script>
    // JavaScript for preventing submission on invalid form
    (function () {
        'use strict';
        document.getElementById('expenseForm').addEventListener('submit', function (event) {
            if (!this.checkValidity()) {
                event.preventDefault();  // Stop form submission
                event.stopPropagation(); // Stop event bubbling
            }
            this.classList.add('was-validated'); // Show validation styling
        }, false);
    })();
</script>
